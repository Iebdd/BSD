\documentclass{article}

\usepackage{geometry}
\usepackage{makecell}
\usepackage{array}
\usepackage{multicol}
\usepackage{setspace}
\usepackage{changepage}
\usepackage{booktabs}
\usepackage[explicit]{titlesec}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{cprotect}
\usepackage{float}
\newcolumntype{?}{!{\vrule width 1pt}}
\newcommand{\paragraphlb}[1]{\paragraph{#1}\mbox{}\\}
\renewcommand{\contentsname}{Inhaltsverzeichnis:}
\renewcommand\theadalign{tl}
\setstretch{1.10}
\setlength{\parindent}{0pt}

\titleformat{\section}
  {\normalfont\Large\bfseries}{\thesection}{1em}{\hyperlink{sec-\thesection}{#1}
\addtocontents{toc}{\protect\hypertarget{sec-\thesection}{}}}
\titleformat{name=\section,numberless}
  {\normalfont\Large\bfseries}{}{0pt}{#1}

\titleformat{\subsection}
  {\normalfont\large\bfseries}{\thesubsection}{1em}{\hyperlink{subsec-\thesubsection}{#1}
\addtocontents{toc}{\protect\hypertarget{subsec-\thesubsection}{}}}
\titleformat{name=\subsection,numberless}
  {\normalfont\large\bfseries}{\thesubsection}{0pt}{#1}

\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

\geometry{top=12mm, left=1cm, right=2cm}
\title{\vspace{-1cm}Netzwerktechnik Advanced}
\author{Andreas Hofer}

\begin{document}
	\maketitle
	\tableofcontents
	\section{LAN - Design und Architektur}
	\subsection{Switches}
	Ein Baublock eines Netzes ist der Switch. Ein Switch befindet sich in der Netzwerktopographie relativ weit unten und soll viele Geräte in einem Netzwerk miteinander verbinden. Das Grundproblem, das ein Switch lösen soll, ist, dass in einem Netzwerk in dem jeder Benutzer mit jedem anderen verbunden ist, nur einer gleichzeitig senden kann, da es ansonsten zu einer Kollision kommt. Ein Vorgänger des Switches war dabei der Hub, welcher jedoch eingehende Pakete an alle weitersendet, da er nicht weiß wo es hingehört.
	Ein Switch ist dabei bedeutend intelligenter und speichert ab an welchem Port welcher Benutzer zu finden ist. Dazu werden MAC-Adressen verwendet.
	\subsubsection{MAC-Adressen}
	MAC-Adressen sind theoretisch weltweit eindeutige Nummern um ein Gerät genau zu identifizieren. Das ist zwar nicht sicher, da die MAC-Adresse leicht geändert werden können.
	\subsubsection{Aufgaben}
	Ein Switch hat fünf grundlegende Aufgaben:
	\paragraphlb{Learning}
	Beim Learning versucht ein Switch so gut wie möglich vorauszusagen, zu welchem Port ein Paket weitergeleitet werden soll. Dabei speichert er die MAC-Adresse und den dazugehörigen Port in einer Tabelle ab um später auf diese wieder zurückzugreifen. Abhängig ob eine MAC-Adresse gefunden wird oder nicht, verwendet der Switch die Forwarding oder Flood Funktion um ein Paket weiterzuleiten.
	\paragraphlb{Aging}
	Beim Aging werden MAC-Adressen, welche länger kein update erhalten haben, aus der Tabelle gelöscht. In der Regel wird eine Adresse nur für relativ kurze Zeit gespeichert, da es normal ist, dass ein Gerät sich regelmäßig meldet, wodurch es wahrscheinlich ist, dass ein Benutzer nicht mehr verfügbar ist.
	\paragraphlb{Forwarding}
	Wenn eine MAC-Adresse in der Tabelle gefunden wird, wird ein Paket an den relevanten Port weitergeleitet.
	\paragraphlb{Flooding}
	Wird eine MAC-Adresse nicht gefunden, schickt ein Switch ein Paket an alle Ports, da er keine Information besitzt.
	\paragraphlb{Filtering}
	Abhängig von festgelegten Regeln, werden gewisse MAC-Adressen nicht weitergeleitet, wodurch man Zugriffskontrollen aufbauen kann. Hierfür werden VLAN's gebraucht.
	\subsection{Zusätzliche Begriffe}
	Einige zusätzliche Begriffe zum Verständnis sind:
	\subsubsection{Collision Domain}
	Eine Kollisionsdomäne ist ein Netzwerk, in welchem verschiedene Teilnehmer sich untereinander stören können, falls diese gleichzeitig eine Anfrage abschicken. Ein Switch teilt dabei die Collision Domain, während ein Hub sie erweitert.
	\subsubsection{Broadcast Domain}
	Die Broadcast Domain ist das Netzwerk welches durch einen Broadcast erreichbar ist. Da Broadcasts immer das gesamte Netzwerk beinhalten, teilt ein Router die Broadcast Domain.
	\subsection{Hierarchisches Netzwerkmodell}
	Das hierarchische Netzwerkmodell teilt das Netzwerk in drei Teile. Es ist hierarchisch weil es repräsentiert wie sich der Netzwerkverkehr im Netzwerk bewegt. Die drei Schichten sind:
	\begin{itemize}
		\item{Access Layer}
		\begin{itemize}
			\item{Bietet Endnutzern direkten Zugriff auf das Netzwerk}
		\end{itemize}
		\item{Distribution Layer}
		\begin{itemize}
			\item{Verbindet viele Access Layer und verbindet die beiden anderen Schichten}
		\end{itemize}
		\item{Core Layer}
		\begin{itemize}
			\item{Dient als Backbone des Netzwerks und verbindet zu weiteren Netzwerken}
		\end{itemize}
	\end{itemize}
	\paragraphlb{Access Layer}
	Der Access Layer hat die meisten Ports im Netzwerk. Dabei wird das Netzwerk in viele Teile segmentiert, meist anhand von physischer Vorraussetzungen. Im Access Layer wird auch Port Security gehandhabt um sicherzustellen, dass nur die richtigen Personen Zugriff erhalten. \\
	Switches and Access Points werden meist nicht redundant aufgebaut, da die Menge an Nutzern die beeinträchtigt werden überschaubar ist. Power over Ethernet (PoE) wird auch hier gehandhabt, damit man nicht immer ein eigenes Stromkabel für Komponenten braucht.
	\paragraphlb{Distribution Layer}
	Viele Access Layer Geräte laufen auf ein paar Distribution Layer Geräte zurück. Merkmale des Distribution Layer sind ein schnelles Forwarding und eine hohe Bandbreite. Diese Switches sind sehr wohl redundant, da sonst ein gesamtes Access Layer Netzwerk ausfallen würde. Hier wird auch Quality of Service (QoS) übernommen, um sicherzustellen, dass wichtige Infrastrukturelemente stets guten Zugriff haben.
	\paragraphlb{Core Layer}
	Im Core Layer laufen alle Distribution Layer Geräte zusammen. Diese sind wiederum redundant aufgebaut. Anders als die beiden anderen Schichten, übernimmt der Core Layer auch das Switching, da er sich auch mit anderen Netzwerken verbinden muss.
	\subsection{Anforderungen eines Netzwerks}
	\subsubsection{Office}
	In einem Office LAN Netzwerk sollten idealerweise:
	\begin{itemize}
		\item{Viele Ports}
		\item{Schnelle Zugriffszeiten}
		\item{Spanning Tree Aktiv}
	\end{itemize}
	sein. In kleineren Netzwerken wird Distribution und Core oft miteinander verbunden, da es nicht nötig ist. In diesem Fall sind dann Access LAyer Geräte direkt mit dem Core verbunden.
	\paragraphlb{Mindestanforderungen}
	In der Regel sollte man Managed Switches verwenden, da unmanaged Switches die Anforderungen oft nicht erfüllen. Es sollten auch VLANs unterstützt werden. Idealerweise sollte man 48 Port Switches verwenden, es können bei kleineren Systemen jedoch auch 24 verwendet werden. Im Access Layer sollten Kupferkabel verwendet werden da die Geschwindigkeiten in der Regel ausreichen. Für externen Zugriff sollte man Glasfaser verwenden.
	\subsubsection{Datencenter}
	In einem Datencenter benötigt man andere Anforderungen. So braucht man viele Ports und kurze Verbindungen zwischen den Servern. Das 3-Schichten Modell wird heutzutage in Datenzentren nicht mehr verwendet, da es eine schnelle Verbindung zum Core ermöglicht. Stattdessen verwendet man eher die Spine Leaf Architektur, welche Zugriff auf die Server untereinander ermöglicht, wobei es die Redundanz behält. \\
	Große Probleme in Datenzentren sind oft:
	\begin{itemize}
		\item{Schlechte Verkabelung}
		\item{Fehlende Redundanzen}
		\item{Fehlende Bandbreiten}
		\item{Unzureichende Segmentierung}
		\begin{itemize}
			\item{Idealerweise sollte ein Angreifer der Zugriff zu einem System erhält, nicht auch Zugriff zu allen anderen bekommen.}
		\end{itemize}
	\end{itemize}
	Auch hier ist das Spanning-Tree Protokol relevant, wobei es mit VLANs Segmentiert wird. Es sollte auch eine Monitoringlösung geben um Probleme schnell erkennen zu können.
	\section{Virtuelle LANs}
	Virtuelle LANs (VLAN) sind LANs, welche nicht physisch sondern virtuell getrennt sind. Normalerweise trennt man Netzwerke mit einem Router um zum Beispiel zwei Stockwerke zu teilen. Wenn man dann jedoch ein weiteres Stockwerk hinzufügt, müsste man auch einen weiteren Router hinzufügen. Ein VLAN ist hingegen nicht durch physische Gegebenheiten begrenzt und kann beliebig gespalten werden. \\
	Die Spaltung eines Netzwerks ist oft sicherheitsrelevant, da so ein Angreifer nicht sofort Zugriff auf das gesamte Netzwerk bekommt.
	\subsection{Segmentierung}
	Bei der Frage, wie ein Netzwerk segmentiert werden sollte, muss man sich einige Überlegungen machen:
	\begin{itemize}
		\item{Wie ist das Netzwerk aufgebaut?}
		\item{Welche Geräte gibt es im Netzwerk?}
		\begin{itemize}
			\item{Geräte die sich aktiv mit der Außenwelt verbinden, aber keine PCs sind, wie Telefone oder Drucker sollten im System abgeschottet sein, da diese sehr einfache Einfallspunkte für Angreifer sein können.}
			\item{IoT Geräte sollten \textit{nie} mit anderen Geräten in einem Netzwerk sein, da diese oft eine sehr schwache Sicherheit besitzen.}
		\end{itemize}
		\item{Existiert ein WLAN?}
		\item{Gibt es Gäste im Unternehmen?}
		\item{Gibt es Server in dem Netzwerk?}
		\item{Gibt es öffentlich erreichbare Systeme im Netzwerk?}
	\end{itemize}
	\subsection{Managed Switches}
	Mit Managed Switches kann man ein softwarebasiertes LAN aufbauen. Dabei wird jedem der Netzwerke eine ID zugewiesen und nur Geräte mit der gleichen ID können andere Geräte erkennen. Ein VLAN hat in der Regel nicht nur eine eigene ID sondern auch eine eigene Subnetzmaske. Da ein solcher Managed Switch ein Netzwerk teilt, muss er zusätzlich zu MAC-Adressen auch IP Pakete auslesen können und ist so L3 fähig.
	\subsection{Vorteile}
	Durch die Verwendung von VLANs kann man einfach unterbinden, dass Broadcasts das gesamte Netzwerk erreichen. Es fügt ebenfalls eine weitere Sicherheitsebene hinzu. Ein weiterer Vorteil ist, dass man Geräte nicht nach physischem Standort, sondern ihrer Funktion gruppieren kann.
	\subsection{Inter VLAN Routing}
	Auch wenn die Netze virtuell getrennt sind, will man trotzdem manchmal zwischen den Netzwerken kommunizieren. Um das zu ermöglichen braucht man Inter VLAN Routing. Wenn man jedoch nur 1 Interface ori VLAN hat ist das bei größeren VLAN Netzwerken schwer umzusetzen.
	\subsubsection{Subinterface}
	Dieses Problem kann man durch Subinterfaces lösen. Dabei werden auf 1 Interface viele VLANs generiert. Dabei kann das VLAN jedoch nicht mehr nur durch die IP-Adresse erkannt werden, weshalb im 802.1Q Standard im IP Paket ein VID Segment die Virtuelle ID festsetzt, damit anhand dieser das Netzwerk zugeordnet werden kann.
	\subsection{Spanning Tree Protocol (STP)}
	Das Spanning Tree Protocol (STP) ist ein Protokoll auf DataLink Ebene (Layer 2), das dazu dient Schleifenbildung zu verhindern. Dieses Problem tritt auf, da Switches stets einen Broadcast an alle Interfaces senden, wenn ein Ziel nicht bekannt ist. Falls es innerhalb des Netzwerkes zu einer Schleifenbildung kommt, werden diese Broadcasts dann stets untereinander weitergereicht und überlasten so das Netzwerk. \\
	Um diese Schleifen zu verhindern definiert das STP drei Arten von Ports: Root, Designated und Alternate.
	\begin{itemize}
		\item{Root}
		\begin{itemize}
			\item{Ein Port der direkt (ohne weitere Sprünge) zur Root Bridge führt (Dem Switch der allen anderen Switches übergeordnet steht)}
		\end{itemize}
		\item{Designated}
		\begin{itemize}
			\item{Ein Port der am schnellsten zum Ziel führt.}
		\end{itemize}
		\item{Alternate}
		\begin{itemize}
			\item{Ein Port über den das Ziel zwar auch erreichbar ist, jedoch nicht der schnellste ist.}
		\end{itemize}
	\end{itemize}
	Zusätzlich hat jeder Port einen von fünf Statusen: Disabled, Blocking, Listening, Learning und Forwarding.
	\subsubsection{Bridge Protocol Unit (BPDU)}
	Mithilfe des Bridge Protocol Units (BPDU) wird das STP propagiert und teilt jedem Switch dessen Rolle mit. Das Protokoll geht stets von der Root Bridge aus.
	\paragraphlb{Root Bridge Election}
	Damit jeder Switch weiß, welcher Switch die Root Bridge ist, gibt es eine Root Bridge Election. Grundsätzlich will jeder Switch eine Root Bridge werden, was durch die Root Bridge ID von 0 als Standard festgelegt wird. In der Regel sollte man jedoch diese Prioritäten anhand der Topologie anpassen, da im Falle von gleicher Priorität aller Switches der Switch mit der niedrigsten MAC-Adresse zur Root Bridge erklärt wird. Zum Beispiel kann es passieren, dass in einem System ein Acess Layer Switch zur Root Bridge wird, was durch die niedrigere Bandbreite problematisch werden kann. \\
	Unabhängig von der Bridge ID können auch die Geschwindigkeit des Interfaces, die Portnummer und der Portpriorität die Auswahl der Root Bridge beeinflussen.
	\subsection{VLAN Trunking Protocol (VTP)}
	Mit dem VLAN Trunking Protocol (VTP) kann man bei der Verwendung von VLANs die Vergabe der Netzwerke automatisieren. Dabei definiert man einen VTP Server und erstellt die VLANs nur dort. Andere Switches, definieren dann anhand dessen als Client ihre VLANs
	\section{WLAN}
	\section{Weiterverkehrsvernetzung (WAN)}
	\section{Netzwerksicherheit}
	\section{NT in der Softwaresicherheit}
	























  
\end{document}